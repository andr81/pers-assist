# SingularityApp MCP Server

MCP-сервер для интеграции планировщика [SingularityApp](https://singularity-app.ru/) с Claude Code.

## Возможности

- **Задачи**: создание, просмотр, обновление, завершение, удаление
- **Проекты**: создание, просмотр, удаление
- **Привычки**: создание, просмотр, отметка выполнения
- **Теги**: создание, просмотр
- **Чек-листы**: добавление пунктов к задачам

## Требования

- Python 3.10+
- Подписка SingularityApp **Pro** или **Elite** (для доступа к API)
- API-токен из [личного кабинета](https://me.singularity-app.com)

## Установка

### 1. Клонируйте или скопируйте проект

```bash
git clone <repository-url>
cd singularity-mcp
```

### 2. Установите зависимости

```bash
pip install -e .
```

Или с использованием uv:

```bash
uv pip install -e .
```

### 3. Получите API-токен

1. Перейдите в [личный кабинет SingularityApp](https://me.singularity-app.com)
2. Откройте раздел «Доступ к API»
3. Нажмите «Создать токен»
4. Выберите нужные права (задачи, проекты, привычки и т.д.)
5. Скопируйте токен

### 4. Настройте Claude Code

Добавьте конфигурацию в файл `~/.claude/claude_desktop_config.json`:

```json
{
  "mcpServers": {
    "singularity": {
      "command": "singularity-mcp",
      "env": {
        "SINGULARITY_API_TOKEN": "ваш-токен-здесь"
      }
    }
  }
}
```

Или, если используете путь к Python:

```json
{
  "mcpServers": {
    "singularity": {
      "command": "python",
      "args": ["-m", "singularity_mcp.server"],
      "env": {
        "SINGULARITY_API_TOKEN": "ваш-токен-здесь"
      }
    }
  }
}
```

### 5. Перезапустите Claude Code

После перезапуска вы сможете использовать команды для работы с SingularityApp.

## Доступные инструменты

### Задачи

| Инструмент | Описание |
|------------|----------|
| `list_tasks` | Получить список задач |
| `get_task` | Получить задачу по ID |
| `create_task` | Создать новую задачу |
| `update_task` | Обновить задачу |
| `complete_task` | Отметить задачу выполненной |
| `delete_task` | Удалить задачу |
| `get_today_tasks` | Получить задачи на сегодня |

### Проекты

| Инструмент | Описание |
|------------|----------|
| `list_projects` | Получить список проектов |
| `create_project` | Создать новый проект |
| `delete_project` | Удалить проект |

### Привычки

| Инструмент | Описание |
|------------|----------|
| `list_habits` | Получить список привычек |
| `create_habit` | Создать новую привычку |
| `mark_habit` | Отметить привычку выполненной |

### Теги

| Инструмент | Описание |
|------------|----------|
| `list_tags` | Получить список тегов |
| `create_tag` | Создать новый тег |

### Чек-листы

| Инструмент | Описание |
|------------|----------|
| `add_checklist_item` | Добавить пункт в чек-лист задачи |

## Примеры использования в Claude Code

```
> Покажи мои задачи на сегодня

> Создай задачу "Купить продукты" на завтра с высоким приоритетом

> Покажи все проекты

> Создай привычку "Пить воду" зелёного цвета

> Отметь привычку HB-123 выполненной
```

## Формат дат

API требует даты в формате ISO 8601 с указанием времени:
- Правильно: `2024-01-01T00:00:00`
- Неправильно: `2024-01-01`

MCP сервер автоматически конвертирует даты в правильный формат.

## Ограничения API

- API не поддерживает создание повторяющихся задач
- Нет поддержки вебхуков и подписок на изменения
- Совместные проекты не возвращаются через API

## Лицензия

MIT
