# Ежедневный вечерний обзор

Проведи ежедневный вечерний обзор для пользователя:

## ⛔ КРИТИЧЕСКИ ВАЖНЫЕ ПРАВИЛА

### Запрет на выдумывание данных
- **НИКОГДА не придумывай задачи, события, названия или детали**
- **ВСЕ данные берутся ТОЛЬКО из реальных источников:**
- **Названия задач, проектов, событий — копируй ДОСЛОВНО из источника**
- **Не додумывай модели машин, имена людей, детали событий**

### Очистка контекста
- Перед выполнением команды **игнорируй любые ранее полученные данные**
- Каждый запрос к API делай заново — не используй "кэшированные" результаты
- Если есть сомнения в актуальности данных — перезапроси API

### Подготовка
- **КРИТИЧЕСКИ ВАЖНО:** Получи текущую дату одним запросом:
  ```bash
  curl -s "https://timeapi.io/api/Time/current/zone?timeZone=Europe/Minsk"
  ```
  Ответ содержит: date, dayOfWeek, year, month, day
- Используй эту информацию для расчета всех дат в документе
- **НЕ УГАДЫВАЙ дни недели!** Используй dayOfWeek из API и рассчитывай остальные дни
- Прочитать файл настроек `config/settings.yaml` через Read tool
- Извлечь:
  - Город: `user.city`
  - Источники новостей: `news.sources`
- Ты можешь задавать сколько угодно уточняющих вопросов, чтобы сделать отчет и планирование более эффективно.

## Шаги

### 1. Получение выполненных задач за сегодня
**КРИТИЧЕСКИ ВАЖНО:** Используй `include_archived=True` для получения выполненных задач!
```python
mcp__singularity__list_tasks(
    start_date_from="YYYY-MM-DDT00:00:00",
    start_date_to="YYYY-MM-DD+1T00:00:00",  # следующий день!
    include_archived=True  # ← ОБЯЗАТЕЛЬНО для выполненных задач!
)
```

**Почему это важно:**
- Выполненные задачи (`checked=1`) автоматически помечаются как `showInBasket=false`
- API считает их "архивированными"
- Без `include_archived=True` выполненные задачи НЕ вернутся в результатах!

**Фильтрация результатов:**
- Выполненные: `checked == 1`
- Невыполненные: `checked != 1` или `checked` отсутствует

### 2. Получение событий календаря
- Получи события и встречи из всех google-календарей за сегодня

### 3. Анализ дня
- По сегодняшним выполненным задачам и встречам составь список возможных todo, по которым нужно создать задачи на будущее
- Составь список задач которые остались не выполнены (из тех же данных, где `checked != 1`)
- **Сначала собери все решения:** По КАЖДОЙ задаче ОТДЕЛЬНО используй `AskUserQuestion` tool с вопросом "Что делать с задачей '[название задачи]'?" и опциями (4 основные, если нужно что-то еще - будет доступна опция "Other"):
  - "Перенести на завтра" (с описанием: переносит start на завтра)
  - "Отложить на когда-нибудь" (с описанием: устанавливает deferred=true, убирает start)
  - "Выполнить сейчас" (с описанием: отмечает задачу как выполненную)
  - "Оставить как есть" (с описанием: не вносит изменений)
- **Только после получения ВСЕХ ответов** выполни соответствующие действия через Singularity API для всех задач.

### 4. Планирование на завтра
**Получи задачи на завтра:**
```python
mcp__singularity__list_tasks(
    start_date_from="YYYY-MM-DDT00:00:00",  # завтрашняя дата
    start_date_to="YYYY-MM-DD+1T00:00:00",  # послезавтра
    include_archived=False  # только активные задачи
)
```
Выведи их с кратким описанием, сгруппируй по приоритету.
- Получи задачи "когда-нибудь" (deferred=true без start). Сгруппируй их по проектам и выведи.
- Получи встречи и события из всех google-календарей на завтра
- Составь план с советами на завтрашний день
- Получи прогноз погоды на завтра для города из `config/settings.yaml` и кратко его опиши
- Получи самые свежие сегодняшние новости из источников `config/settings.yaml`, выбери из них самые важные для социальных, политических и финансовых влияний. Составь дайджест по ним со ссылками.
- Получи список привычек singularity и предложи какие нужно заполнить

## Формат ответа

Структурируй ответ с эмодзи для наглядности:
- Используй чекбоксы для задач
- Выделяй важное жирным
- Будь лаконичен
- Используй только проверенные актуальные данные, не добавляя никаких фантазий.
